<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
  <title>norisystem HRM</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" th:href="@{css/assign.css?after}" />
  <script type="text/javascript" th:src="@{js/assign.js?after}"></script>
</head>

<body>
<!-- -------------------------------------상단 네비게이션 바------------------------------------- -->
<nav class="navbar navbar-inverse" style="position: sticky; top: 0;  width: 100%; z-index: 1000;">
    <div class="container-fluid">
      <div class="navbar-header">
      <a class="navbar-brand" th:href="@{/index}" style="font-weight: bold; color: orange;">norisystem</a>
      </div>
      <ul class="nav navbar-nav">
          <!-- 사원관리 -->
          <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" >
                사원관리<span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a th:href="@{/main}"  >사원관리</a></li>
              </ul>
          </li>
          <!-- 사업관리 -->
          <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" >
                  사업관리<span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                  <li><a th:href="@{/assign}"  >과제관리</a></li>
              </ul>
          </li>
          <!-- 교육관리 -->
          <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" >
                교육관리<span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                  <li><a th:href="@{/#}"  >교육이수</a></li>
              </ul>
          </li>
          <!-- 통계현황 -->
          <li><a th:href="@{/#}"  >통계현황</a></li>
          <!-- 기준관리 -->
          <li><a th:href="@{/code}"  >기준관리</a></li>
          <!-- test -->
          <li><a th:href="@{/test}"  >test</a></li>
      </ul>
      <form th:action="@{/logout_do}" method="get" style="padding-top: 10px; vertical-align: middle;">
          <button class="btn btn-link" style="float: right; color: lightskyblue;">
              <span>로그아웃</span> <span class="glyphicon glyphicon-log-out"></span>
          </button>
      </form>
    </div>
  </nav>
<!-- -------------------------------------main 부분------------------------------------- -->

<div class="container mt-3" style="padding-top: 50px; width: auto;">
  <!-- 신규,저장,삭제 버튼 -->
    <div class="container" style="text-align: right;">
        <div class="row" style="float: right; text-align: right;">
            <div class="col-md-4">
                <a href="/assign_new" class="btn btn-default">신규</a>
            </div>
            <div class="col-md-4">
                <form class="" action="@{/delete.do}" method="post" style="text-align: right;">
                    <button type="button" class="btn btn-danger">삭제</button>
                </form>
            </div>
        </div>
    </div>
<br>


<!-- 검색 -->
<div class="container">
  <div class="row" th:style="'float: right; text-align: right'">
      <div class="col-md-6">
          <form class="search-form" th:action="@{/}" method="get">
              <div class="input-group" style="width: 500px;">
                  <input type="text" class="form-control" placeholder="과제명으로 검색해주세요" name="search">
                  <div class="input-group-btn">
                      <button class="btn btn-default" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                      </button>
                  </div>
              </div>
          </form>
      </div>
      <div class="col-md-6" th:style="'text-align: right; padding-right: 35px;'">
          <form class="" th:action="@{/}" method="post" th:style="'float: right; margin-right:0px;'">
              <button class="btn btn-default" type="submit">
                  <i class="glyphicon glyphicon-cloud-download"></i>
              </button>
          </form>
          <form class="" th:action="@{/}" method="post" th:style="'float: right;'">
              <button class="btn btn-default" type="submit">
                  <i class="glyphicon glyphicon-cloud-upload"></i>
              </button>
          </form>
      </div>
  </div>
</div>

<div class="container scrollable" style="word-break: break-all; width: 85%">
    <table class="table table-hover" style="overflow: auto; width: 85%" >
    <br><br><br>
        <thead>
            <tr>
                <th></th>
                <th style="width: 40px;">과제코드</th>
                <th style="width: 40px;">과제명</th>
                <th>담당자</th>
                <th>부서</th>
                <th>과제 생성일</th>
                <th>책임자</th>
                <th>부서</th>
                <th>고객사</th>
                <th>계약금액</th>
                <th>계약공수</th>
                <th>정규(명)</th>
                <th>파트너(명)</th>
                <th>제안일</th>
                <th>시작일</th>
                <th>완료일</th>
                <th>기간</th>
                <th>상태</th>
                <th>개요</th>
                <th>특이사항</th>
                <th>참조파일</th>
                <th>확정유무</th>
                <th>등록자ID</th>
                <th>등록자사번</th>
                <th>등록자이름</th>
                <th>경로</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="assign : ${tasks}">
                <td><input type="checkbox" name="taskIds" th:value="${assign.pm_code}" /></td>
                <td>
                    <a th:href="@{'/getTaskInfo/' + ${assign.pm_code}}" th:text="${assign.pm_code}"></a>
                </td>
                <td th:text="${assign.pm_name}"></td>
                <td th:text="${assign.pm_nori_manager}"></td>
                <td th:text="${assign.pm_nori_bu}"></td>
                <td th:text="${#dates.format(assign.pm_create_date, 'yyyy-MM-dd')}"></td>
                <td th:text="${assign.pm_manager}"></td>
                <td th:text="${assign.pm_bu}"></td>
                <td th:text="${assign.pm_business}"></td>
                <td th:text="${assign.pm_price}"></td>
                <td th:text="${assign.pm_workload}"></td>
                <td th:text="${assign.pm_full}"></td>
                <td th:text="${assign.pm_part}"></td>
                <td th:text="${#dates.format(assign.pm_suggest_date, 'yyyy-MM-dd')}"></td>
                <td th:text="${#dates.format(assign.pm_start_date, 'yyyy-MM-dd')}"></td>
                <td th:text="${#dates.format(assign.pm_end_date, 'yyyy-MM-dd')}"></td>
                <td th:text="${assign.pm_work_date}"></td>
                <td th:text="${assign.pm_status}"></td>
                <td th:text="${assign.pm_outline}"></td>
                <td th:text="${assign.pm_bego}"></td>
                <td th:text="${assign.pm_file}"></td>
                <td th:text="${assign.pm_confirmed}"></td>
                <td th:text="${assign.pm_save_id}"></td>
                <td th:text="${assign.pm_save_sa}"></td>
                <td th:text="${assign.pm_save_name}"></td>
                <td th:text="${assign.pm_file_path}"></td>
            </tr>
        </tbody>
    </table>
</div>

</div>
<!-- -------------------------------------페이지------------------------------------- -->
<div class="container" style="text-align: center; padding-top: 75px; padding-bottom: 75px;">
    <ul class="pagination">
        <li>
            <a th:href="@{/paging_task(page=1)}">
                <span class="glyphicon glyphicon-step-backward"></span>
            </a>
        </li>
        <li>
            <a th:href="${currentPage == null || currentPage == 1 ? '#' : '/paging_task?page=' + (currentPage - 1)}">
                <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
        </li>
        <li th:each="page, iterStat : ${pages}" 
            th:class="${iterStat.index + 1 == currentPage} ? 'active' : ''">
            <a th:href="@{/paging_task(page=${page})}" th:text="${page}"></a>
        </li>
        <li>
            <a th:href="${currentPage == null || currentPage == totalPages ? '#' : '/paging_task?page=' + (currentPage + 1)}">
                <span class="glyphicon glyphicon-chevron-right"></span>
            </a>
        </li>
        <li>
            <a th:href="@{/paging_task(page=${totalPages})}">
                <span class="glyphicon glyphicon-step-forward"></span>
            </a>
        </li>
    </ul>
</div>
<div class="content" style="padding-bottom: 0;">
    <footer class="footer mt-auto py-3 bg-light" style="padding-top: 10px;">
        <a class="text-muted">©norisystem Corp.</a><br>
        <a href="http://www.norisystem.co.kr/" target="_blank">Main Home / </a>
        <a href="https://gw.norisystem.co.kr/ngw/app/#/" target="_blank">GroupWare</a>
        <br>
    </footer>
</div>
</body>
</html>